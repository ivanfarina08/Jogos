<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">

    <style>
        img {
            width: 100%;
            padding: 5px;
        }

        body {
            width: 750px;
            overflow: hidden;
            background-color: #F4FC02BA;
        }

        col,
        row {
            padding: 0;
            margin: 0;
        }

        @media (max-width: 600px) {
            body{
                width: 100%;
            }
        }
    </style>
    <title>Document</title>
</head>

<body>
    <div class="container text-center">
        <div class="row">
            <div class="col">
                <img src="img/virada.jpg" alt="" id="img0" onclick="vira_carta(0)">
            </div>
            <div class="col">
                <img src="img/virada.jpg" alt="" id="img1" onclick="vira_carta(1)">
            </div>
            <div class="col">
                <img src="img/virada.jpg" alt="" id="img2" onclick="vira_carta(2)">
            </div>
            <div class="col">
                <img src="img/virada.jpg" alt="" id="img3" onclick="vira_carta(3)">
            </div>
        </div>
        <div class="row">
            <div class="col">
                <img src="img/virada.jpg" alt="" id="img4" onclick="vira_carta(4)">
            </div>
            <div class="col">
                <img src="img/virada.jpg" alt="" id="img5" onclick="vira_carta(5)">
            </div>
            <div class="col">
                <img src="img/virada.jpg" alt="" id="img6" onclick="vira_carta(6)">
            </div>
            <div class="col">
                <img src="img/virada.jpg" alt="" id="img7" onclick="vira_carta(7)">
            </div>
        </div>
        <div class="row">
            <div class="col">
                <img src="img/virada.jpg" alt="" id="img8" onclick="vira_carta(8)">
            </div>
            <div class="col">
                <img src="img/virada.jpg" alt="" id="img9" onclick="vira_carta(9)">
            </div>
            <div class="col">
                <img src="img/virada.jpg" alt="" id="img10" onclick="vira_carta(10)">
            </div>
            <div class="col">
                <img src="img/virada.jpg" alt="" id="img11" onclick="vira_carta(11)">
            </div>
        </div>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL"
        crossorigin="anonymous"></script>

    <script>
        var imagem_virada = [false, false, false, false, false, false, false, false, false, false, false, false];
        var imagem_src = [1, 2, 3, 3, 1, 4, 2, 4, 5, 6, 6, 5];
        var cartas_viradas = [];
        var quant_viradas = 0;
        var quant_pares = 0;
        const quant_pares_jogo = 6;

        function vira_carta(value) {
            var elemento = document.getElementById("img" + value);

            console.log(elemento.onclick);

            troca_imagem(value, elemento);

            cartas_viradas[quant_viradas] = value;
            quant_viradas++;
            console.log(cartas_viradas);

            if (quant_viradas == 2) {
                if (verifica_par()) {
                    par_perfeito(elemento);
                }
                else {
                    par_errado(elemento);
                }
            }
        }

        function troca_imagem(value, elemento) {
            if (imagem_virada[value]) {
                elemento.src = "img/virada.jpg";
                imagem_virada[value] = false;
            }
            else {
                elemento.src = "img/" + imagem_src[value] + ".jpg";
                imagem_virada[value] = true;
            }
        }

        function verifica_par() {
            if (imagem_src[cartas_viradas[0]] == imagem_src[cartas_viradas[1]]) {
                return true;
            }
            else {
                return false;
            }
        }

        function par_perfeito(elemento) {
            let elemento2 = document.getElementById("img" + cartas_viradas[0]);
            elemento.onclick = null;
            elemento2.onclick = null;
            quant_viradas = 0;
            cartas_viradas = [];
            quant_pares++;
            fim_jogo();
        }

        function par_errado(elemento) {
            setTimeout(function () {
                let elemento2 = document.getElementById("img" + cartas_viradas[0]);
                elemento.src = "img/virada.jpg";
                elemento2.src = "img/virada.jpg";
                quant_viradas = 0;
                imagem_virada[cartas_viradas[0]] = false;
                imagem_virada[cartas_viradas[1]] = false;
                cartas_viradas = [];

            }, 500); //delay is in milliseconds
        }

        function fim_jogo() {
            if (quant_pares == quant_pares_jogo) {
                setTimeout(function () {
                    let resposta = confirm("Fim de Jogo!\nDeseja jogar novamente?");
                    console.log(resposta);
                    if (resposta) {
                        reseta_jogo();
                    }
                    else {
                        //so mostra as imagens
                    }
                }, 1000);
            }
        }

        function reseta_jogo() {
            quant_viradas = 0;
            cartas_viradas = [];
            for (let i = 0; i < imagem_src.length; i++) {
                var elemento = document.getElementById("img" + i);
                elemento.src = "img/virada.jpg";
                elemento.onclick = function onclick(event) {
                    vira_carta(i);
                };
                imagem_virada[i] = false;
            }
            quant_pares = 0;
        }
    </script>
</body>

</html>